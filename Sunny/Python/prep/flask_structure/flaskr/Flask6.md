# Flask study 

#### 해당 폴더에 있는 샘플을 참조하기!

##### flask 확장기능

```
Flask 확장기능(extensions)은 서로 다른 다양한 방법으로 Flask 의 기능을 추가 시킬 수 있게 해줌. 예를 들어 확장기능을 이용하여 데이터베이스 그리고 다른 일반적인 태스크들을 지원할 수 있음.

1. 확장기능 찾아내기
플라스크 확장기능들의 목록은 Flask Extension Registry 에서 살펴볼 수 있음 그리고 easy_install 혹은 pip 를 통해 다운로드 할 수 있음 만약 여러분이 Flask 확장기능을 추가하면, requirements.rst 혹은 setup.py 에 명시된 파일 의존관계로부터 간단한 명령어의 실행이나 응용 프로그램 설치와 함께 설치될 수 있음

확장기능 사용하기
확장기능은 일반적으로 해당 기능을 사용하는 방법을 보여주는 문서를 가지고 있음 이 확장기능의 작동 방식에 대한 일반적인 규칙은 없지만, 확장기능은 공통된 위치에서 가져오게 된음 만약 여러분이 Flask-Foo 혹은 Foo-Flask 라는 확장기능을 호출 하였다면, 그것은 항상 flask.ext.foo 을 통해서 가져오게 될 것이다

ex)
from flask.ext import foo
```

##### 쉘에서 작업

```

많은 사람들이 파이썬을 좋아하는 이유 중 한가지는 바로 대화식 쉘
그것은 기본적으로 여러분이 실시간으로 파이썬 명령을 싱행하고 결과를 실시간으로 즉시 받아 볼 수 있으며, Flask 자체는 대화식 쉘과 함께 제공되지 않음.
왜냐하면 Flask는 특정한 선행 작업이 필요하지 않고, 단지 여러분의 어플리케이션에서 불러오기만 하면 시작할 수 있기 때문임.

하지만, 쉘에서 좀 더 많은 즐거운 경험을 얻을 수 있는 몇 가지 유용한 헬퍼들이 있음. 대화식 콘솔 세션에서의 가장 중요한 문제는 여러분이 직접 브라우저에서 처럼 g, request 를 발생 시킬 수 없고, 그 밖의 다른 것들도 가능하지 않음 하지만 테스트 해야 할 코드가 그것들에게 종속관계에 있다면 여러분은 어떻게 할 것인가?

이 장에는 몇가지 도움이 되는 함수가 있음. 이 함수들은 대화식 쉘에서의 사용뿐만 아니라, 단위테스트와 같은 그리고 요청 컨텍스트를 위조해야 하는 상황에서 또한 유용하다는 것을 염두해 두자.

일반적으로 여러분이 요청 컨텍스트 를 먼저 읽기를 권장함

1. 요청 컨텍스트 생성하기
쉘에서 적절한 요청 컨텍스트를 생성하는 가장 쉬운 방법은 RequestContext: 를 우리에게 생성해주는 test_request_context 메소드를 사용하는 것!
ex)
>>> ctx = app.test_request_context()

일반적으로 여러분은 with 구문을 사용하여 이 요청 객체를 활성화 하겠지만, 쉘에서는 push() 와 pop() 를 직접 다루는 방법이 더 쉬움.

ex)
>>> ctx.push()
여러분이 pop 을 호출하는 그 시점까지 request 객체를 사용하여 작업 할 수 있음.

ex)
>>> ctx.pop()

2. 요청하기 전/후에 발사하기(Firing)
단지 요청 컨텍스트를 생성만 하면, 일반적으로 요청전에 실행되는 코드를 실행할 필요가 없음. 이것은 만약 여러분이 before-request 콜백에서 데이터베이스 연결을 하거나 , 혹은 현재 사용자가 g 객체에 저장하지 않을 경우에 발생할 수 있음.
그러나 이것은 단지 preprocess_request() 를 호출하여 쉽게 수행 할 수 있음.

ex)
>>> ctx = app.test_request_context()
>>> ctx.push()
>>> app.preprocess_request()

다음을 염두 해 두어야 함. 이 경우에 preprocess_request() 함수는 응답(response) 객체를 리턴할 것이고, 이것은 그냥 무시해도 됌.

요청을 종료시키기 위해서, 여러분은 사후 요청 함수 ( process_response() 에 의해 트리거되는)가 응답 객체에서 사용 전에 약간의 트릭을 사용해야 함.

ex)
>>> app.process_response(app.response_class())
<Response 0 bytes [200 OK]>
>>> ctx.pop()

컨텍스트가 열리게 되면 teardown_request() 로 등록된 함수가 자동으로 호출. 
그래서 이것은 자동으로 요청 컨텍스트 (데이터 베이스 연결과 같은)에 필요한 자원을 해제 할 수 있는 완벽한 장소임.

3.쉘 경험을 더욱 향상시키기
여러분이 만약 쉘에서의 실험적인 아이디어를 실험하기 좋아한다면, 본인 스스로 여러분의 대화형 세션으로 불러올 모듈을 만들 수 있음. 여기에 또한 여러분은 데이터베이스를 초기화 하거나 테이블을 삭제하는등의 좀 더 유용한 도우미 메소드등을 정의 할 수 있음.

단지 모듈에 이렇게 삽입하면 됌! (shelltools 처럼 불러옴!)
ex)
>>> from shelltools import *

```
##### flask를 위한 패턴

```
https://flask-docs-kr.readthedocs.io/ko/latest/patterns/index.html 참조
```

##### 배포 옵션

```
여러분이 어떤 것을 이용할 수 있는지에 따라서, 플라스크 어플리케이션을 실행할 수 있는 다양한 방법이 있음. 개발 중에는 내장 서버를 사용할 수 있지만, 운영울 위해서는 모든 배포 옵션을 사용해야함. (운영 중에는 내장 개발 서버를 사용하지 마라.) 사용할 수 있는 몇가지 옵션이 있음.

mod_wsgi(아파치), 독립적인 wsgi 컨테이너(gunicorn, tornado, gevent, twisted web, 프록시 설정), uWSGI, FastCGI, CGI 등이 있음
```
추가로 https://flask-docs-kr.readthedocs.io/ko/latest/becomingbig.html를 참조하면 도움이 됌!

